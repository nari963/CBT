let currentIdx = 0;
const terms = [];
const termData = [
  // 아래는 자동 변환된 82개 문제
  {q:'회계정보이용자에게 정보를 제공하는 것은 무엇입니까?',a:'회계',c:['회계','회계처리','상계처리','거래처원장']},
  {q:'회사에서 일어난 거래를 기록하는 방법은 무엇입니까?',a:'회계처리',c:['회계처리','회계','상계처리','거래처원장']},
  {q:'잔액을 없애는 회계처리는 무엇입니까?',a:'상계처리',c:['상계처리','회계','회계처리','거래처원장']},
  {q:'상계처리한 것을 한눈에 볼 수 있는 것은 무엇입니까?',a:'거래처원장',c:['거래처원장','회계','회계처리','상계처리']},
  {q:'차변에 회계처리하는 유형으로 틀린 것은?',a:'자산 감소',c:['자산 증가','부채 감소','자본 감소','비용 증가(발생)','자산 감소']},
  {q:'대변에 회계처리하는 유형으로 틀린 것은?',a:'자산 증가',c:['자산 감소','부채 증가','자본 증가','수익 증가(발생)','자산 증가']},
  {q:'도서인쇄비(책구입비), 복리후생비(회식), 기타업무추진비(접대비)는 무엇이라고 합니까?',a:'계정과목',c:['계정과목','거래처원장','상계처리','회계처리']},
  {q:'업무용휴대전화 요금에 해당하는 계정과목은 무엇입니까?',a:'통신비',c:['통신비','도서인쇄비','복리후생비','기타업무추진비']},
  {q:'특정시점의 재무상태를 나타내는 표는 무엇입니까?',a:'재무상태표',c:['재무상태표','손익계산서','선수금','선급금']},
  {q:'일정기간의 경영성과를 나타내는 표는 무엇입니까?',a:'손익계산서',c:['손익계산서','재무상태표','선수금','선급금']},
  {q:'먼저 받는 돈을 의미하는 계정과목은 무엇입니까?',a:'선수금',c:['선수금','선급금','재무상태표','손익계산서']},
  {q:'미리 지급하는 돈을 의미하는 계정과목은 무엇입니까?',a:'선급금',c:['선급금','선수금','재무상태표','손익계산서']},
  {q:'싸게 사서 비싸게 파는 업종은 무엇입니까?',a:'도소매업',c:['도소매업','제조업','상품','비품']},
  {q:'가공하여 판매하는 업종은 무엇입니까?',a:'제조업',c:['제조업','도소매업','상품','비품']},
  {q:'판매를 위해 취득한 물품은 무엇입니까?',a:'상품',c:['상품','비품','불용비품','매각']},
  {q:'업무에 사용하기 위해 취득한 물품은 무엇입니까?',a:'비품',c:['비품','상품','불용비품','매각']},
  {q:'더이상 사용하지 않는 비품을 의미하는 것은 무엇입니까?',a:'불용비품',c:['불용비품','비품','상품','매각']},
  {q:'상품 매입금액 대비 매출액에 대한 이익을 의미하는 것은 무엇입니까?',a:'마진',c:['마진','매각','비품','상품']},
  {q:'처분을 의미하는 용어는 무엇입니까?',a:'매각',c:['매각','마진','비품','상품']},
  {q:'생산직 직원에게 지급하는 월급은 무엇입니까?',a:'임금',c:['임금','급여','잡금','상여금']},
  {q:'비생산직 직원에게 지급하는 월급은 무엇입니까?',a:'급여',c:['급여','임금','잡금','상여금']},
  {q:'일용직 근로자에게 지급하는 금액은 무엇입니까?',a:'잡금',c:['잡금','임금','급여','상여금']},
  {q:'빌려주는 것을 의미하는 계정과목은 무엇입니까?',a:'대여금',c:['대여금','차입금','현금','당좌예금']},
  {q:'빌려오는 것을 의미하는 계정과목은 무엇입니까?',a:'차입금',c:['차입금','대여금','현금','당좌예금']},
  {q:'당좌수표를 받았을 때 처리하는 계정과목은 무엇입니까?',a:'현금',c:['현금','당좌예금','단기대여금','이자수익']},
  {q:'당좌예입을 했을 때 처리하는 계정과목은 무엇입니까?',a:'당좌예금',c:['당좌예금','현금','단기대여금','이자수익']},
  {q:'건물주가 임차인에게 받는 보증금은 무엇입니까?',a:'임대보증금',c:['임대보증금','임차보증금','현금','당좌예금']},
  {q:'임차인이 건물주에게 주는 보증금은 무엇입니까?',a:'임차보증금',c:['임차보증금','임대보증금','현금','당좌예금']},
  {q:'채무자가 장부상에 기입하는 이자는 무엇입니까?',a:'이자비용',c:['이자비용','이자수익','현금','당좌예금']},
  {q:'채권자가 장부상에 기입하는 이자는 무엇입니까?',a:'이자수익',c:['이자수익','이자비용','현금','당좌예금']},
  {q:'돈을 받을 수 있는 권리를 의미하는 것은 무엇입니까?',a:'채권',c:['채권','채권자','채무자','현금']},
  {q:'돈을 받을 권리가 있는 자를 의미하는 것은 무엇입니까?',a:'채권자',c:['채권자','채권','채무자','현금']},
  {q:'돈을 줘야 하는 의무가 있는 자를 의미하는 것은 무엇입니까?',a:'채무자',c:['채무자','채권자','채권','현금']},
  {q:'받지 못한 자산을 의미하는 계정과목은 무엇입니까?',a:'미수금',c:['미수금','미지급금','외상매출금','외상매입금']},
  {q:'지급하지 않은 부채를 의미하는 계정과목은 무엇입니까?',a:'미지급금',c:['미지급금','미수금','외상매출금','외상매입금']},
  {q:'외상판매로 발생한 채권을 의미하는 계정과목은 무엇입니까?',a:'매출채권',c:['매출채권','매입채무','받을어음','지급어음']},
  {q:'외상판매 후 받지 못한 돈을 의미하는 계정과목은 무엇입니까?',a:'외상매출금',c:['외상매출금','외상매입금','받을어음','지급어음']},
  {q:'외상판매 후 받는 어음을 의미하는 계정과목은 무엇입니까?',a:'받을어음',c:['받을어음','지급어음','외상매출금','외상매입금']},
  {q:'외상구매로 발생한 채무를 의미하는 계정과목은 무엇입니까?',a:'매입채무',c:['매입채무','매출채권','외상매입금','지급어음']},
  {q:'외상구매 후 지급하지 않은 돈을 의미하는 계정과목은 무엇입니까?',a:'외상매입금',c:['외상매입금','외상매출금','받을어음','지급어음']},
  {q:'외상구매 후 발행하는 어음을 의미하는 계정과목은 무엇입니까?',a:'지급어음',c:['지급어음','받을어음','외상매입금','외상매출금']},
  {q:'신문구독료, 도서, 인쇄비에 해당하는 계정과목은 무엇입니까?',a:'도서인쇄비',c:['도서인쇄비','통신비','우표, 엽서','팩스비']},
  {q:'핸드폰요금, 전화요금에 해당하는 계정과목은 무엇입니까?',a:'통신비',c:['통신비','도서인쇄비','우표, 엽서','팩스비']},
  {q:'직원 교통비에 해당하는 계정과목은 무엇입니까?',a:'여비교통비',c:['여비교통비','교육훈련비','기부금','차량유지비']},
  {q:'임직원 교육비에 해당하는 계정과목은 무엇입니까?',a:'교육훈련비',c:['교육훈련비','여비교통비','기부금','차량유지비']},
  {q:'불우이웃돕기 등에 해당하는 계정과목은 무엇입니까?',a:'기부금',c:['기부금','교육훈련비','여비교통비','차량유지비']},
  {q:'업무용차량 유지비에 해당하는 계정과목은 무엇입니까?',a:'차량유지비',c:['차량유지비','기부금','교육훈련비','여비교통비']},
  {q:'재산세, 자동차세 등에 해당하는 계정과목은 무엇입니까?',a:'세금과 공과',c:['세금과 공과','보험료','운반비','광고선전비']},
  {q:'신문, TV, 라디오 광고에 해당하는 계정과목은 무엇입니까?',a:'광고선전비',c:['광고선전비','보험료','운반비','세금과 공과']},
  {q:'상품 발송 운임에 해당하는 계정과목은 무엇입니까?',a:'운반비',c:['운반비','보험료','광고선전비','세금과 공과']},
  {q:'단기시세차익 목적의 주식에 해당하는 계정과목은 무엇입니까?',a:'단기매매증권',c:['단기매매증권','상여금','운반비','광고선전비']},
  {q:'보너스에 해당하는 계정과목은 무엇입니까?',a:'상여금',c:['상여금','운반비','광고선전비','보험료']},
  {q:'구입가격과 취득비용을 합한 금액을 의미하는 것은 무엇입니까?',a:'자산취득원가',c:['자산취득원가','구입가격','취득비용','판매가격']},
  {q:'채용광고, 세무사 비용에 해당하는 계정과목은 무엇입니까?',a:'수수료비용',c:['수수료비용','운반비','광고선전비','보험료']},
  {q:'재무제표에 반영되는 입력은 무엇입니까?',a:'전표입력',c:['전표입력','매입매출전표입력','재무제표 반영','부가가치세 신고서 반영']},
  {q:'재무제표와 부가가치세 신고서에 반영되는 입력은 무엇입니까?',a:'매입매출전표입력',c:['매입매출전표입력','전표입력','재무제표 반영','부가가치세 신고서 반영']},
  {q:'받을어음 추심료에 해당하는 계정과목은 무엇입니까?',a:'매출채권처분손실',c:['매출채권처분손실','채무면제이익','자산수증이익','수수료비용']},
  {q:'채무면제이익이란?',a:'빚 탕감시 면제',c:['빚 탕감시 면제','자산수증이익','수수료비용','매출채권처분손실']},
  {q:'자산수증이익이란?',a:'무상 기증',c:['무상 기증','빚 탕감시 면제','수수료비용','매출채권처분손실']},
  {q:'예수금이란?',a:'원천징수세액',c:['원천징수세액','현금','보통예금','복리후생비']},
  {q:'개발비란?',a:'R&D 신제품 개발 자산',c:['R&D 신제품 개발 자산','경상연구개발비','복리후생비','보통예금']},
  {q:'경상연구개발비란?',a:'R&D 신제품 개발 비용',c:['R&D 신제품 개발 비용','개발비','복리후생비','보통예금']},
  {q:'법인세중간예납기간이란?',a:'1월~6월',c:['1월~6월','3월~8월','6월~12월','1월~12월']},
  {q:'법인세중간납세액이란?',a:'법인세 x 50%',c:['법인세 x 50%','법인세 x 25%','법인세 x 75%','법인세 x 100%']},
  {q:'감가상각이란?',a:'자산가치 비용 배분',c:['자산가치 비용 배분','자산가치 증가','자산가치 감소','자산가치 유지']},
  {q:'감가상각누계액이란?',a:'누적 감가상각',c:['누적 감가상각','자산가치 증가','자산가치 감소','자산가치 유지']},
  {q:'정액법이란?',a:'같은 금액으로 계산',c:['같은 금액으로 계산','상각률로 계산','생산량비례 계산','내용연수 합계 계산']},
  {q:'정률법이란?',a:'상각률로 계산',c:['상각률로 계산','같은 금액으로 계산','생산량비례 계산','내용연수 합계 계산']},
  {q:'연수합계법이란?',a:'내용연수 합계 계산',c:['내용연수 합계 계산','같은 금액으로 계산','상각률로 계산','생산량비례 계산']},
  {q:'생산량비례법이란?',a:'생산량비례 계산',c:['생산량비례 계산','같은 금액으로 계산','상각률로 계산','내용연수 합계 계산']},
  {q:'무형자산상각비란?',a:'무형자산 정액법 상각',c:['무형자산 정액법 상각','자산가치 증가','자산가치 감소','자산가치 유지']},
  {q:'대손충당금이란?',a:'못받을 것 대비 설정',c:['못받을 것 대비 설정','받을어음 추심료','채무면제이익','자산수증이익']},
  {q:'대손상각비란?',a:'대손 확정시 비용',c:['대손 확정시 비용','못받을 것 대비 설정','받을어음 추심료','채무면제이익']},
  {q:'외화환산손실이란?',a:'외화자산 평가 손실',c:['외화자산 평가 손실','외화자산 평가 이익','외환차손','외환차익']},
  {q:'외화환산이익이란?',a:'외화자산 평가 이익',c:['외화자산 평가 이익','외화자산 평가 손실','외환차손','외환차익']},
  {q:'외환차손이란?',a:'환율 변동 손실',c:['환율 변동 손실','환율 변동 이익','외화환산손실','외화환산이익']},
  {q:'외환차익이란?',a:'환율 변동 이익',c:['환율 변동 이익','환율 변동 손실','외화환산손실','외화환산이익']},
  {q:'유가증권이란?',a:'재산권 증서',c:['재산권 증서','주식','채권','현금']},
  {q:'단기매매증권이란?',a:'단기시세차익 목적',c:['단기시세차익 목적','장기투자 목적','만기보유 목적','관계기업 투자 목적']},
  {q:'만기보유증권이란?',a:'만기까지 보유 목적',c:['만기까지 보유 목적','단기시세차익 목적','장기투자 목적','관계기업 투자 목적']},
  {q:'매도가능증권이란?',a:'장기투자 목적',c:['장기투자 목적','단기시세차익 목적','만기까지 보유 목적','관계기업 투자 목적']},
  {q:'지분법적용투자주식이란?',a:'관계기업 투자 목적',c:['관계기업 투자 목적','장기투자 목적','단기시세차익 목적','만기까지 보유 목적']}
];
for(let i=0;i<termData.length;i++){
  let t = termData[i];
  terms.push({question:`${i+1}. ${t.q}`,choices:t.c,answer:t.a});
}

let termStatus = Array(terms.length).fill('');

window.addEventListener('DOMContentLoaded', function() {
  const termBox = document.getElementById('term-box');
  const termResult = document.getElementById('term-result');
  function showTerm(idx) {
    // 풀이 결과 테이블 표시
    const statusTable = document.getElementById('term-status-table').querySelector('tbody');
    statusTable.innerHTML = '';
    for(let i=0;i<terms.length;i++){
      let mark = termStatus[i];
      let highlight = i===idx ? 'background:#e6f2ff;font-weight:bold;' : '';
      statusTable.innerHTML += `<tr style="${highlight}"><td style="text-align:center; border-bottom:1px solid #eee;">${i+1}</td><td style="text-align:center; border-bottom:1px solid #eee;">${mark}</td></tr>`;
    }

    // 현재 문제 번호에 맞춰 테이블 스크롤 이동
    setTimeout(() => {
      const table = document.getElementById('term-status-table');
      const rows = table.querySelectorAll('tbody tr');
      if (rows[idx]) {
        rows[idx].scrollIntoView({behavior:'smooth', block:'center'});
      }
    }, 100);
    const t = terms[idx];
    termBox.innerHTML = `<div class="term-question"><span style='font-size:1rem;color:#888;'>[${idx+1}/${terms.length}]</span> ${t.question}</div>
      <ul style="list-style:none; padding:0;">
        ${t.choices.map(c => `<li style="margin-bottom:0.7rem;"><button class="term-btn" style="width:100%;" data-choice="${c}">${c}</button></li>`).join('')}
      </ul>
      <div style='margin-top:2rem;text-align:center;'>
        <button id='term-prev' ${idx===0?'disabled':''}>이전</button>
        <span style='margin:0 1rem;'>${idx+1} / ${terms.length}</span>
        <button id='term-next' ${idx===terms.length-1?'disabled':''}>다음</button>
      </div>`;
    termResult.textContent = '';
    termBox.querySelectorAll('.term-btn').forEach(btn => {
      btn.onclick = function() {
        const userAnswer = btn.getAttribute('data-choice');
        if (userAnswer === t.answer) {
          termResult.textContent = '정답입니다!';
          termResult.style.color = '#005bac';
          termStatus[idx] = 'O';
        } else {
          termResult.textContent = '오답입니다.';
          termResult.style.color = 'red';
          termStatus[idx] = 'X';
        }
        // 풀이 결과 테이블 갱신
        const statusTable = document.getElementById('term-status-table').querySelector('tbody');
        statusTable.innerHTML = '';
        for(let i=0;i<terms.length;i++){
          let mark = termStatus[i];
          let highlight = i===idx ? 'background:#e6f2ff;font-weight:bold;' : '';
          statusTable.innerHTML += `<tr style="${highlight}"><td style="text-align:center; border-bottom:1px solid #eee;">${i+1}</td><td style="text-align:center; border-bottom:1px solid #eee;">${mark}</td></tr>`;
        }
        // 현재 문제 번호에 맞춰 테이블 스크롤 이동
        setTimeout(() => {
          const table = document.getElementById('term-status-table');
          const rows = table.querySelectorAll('tbody tr');
          if (rows[idx]) {
            rows[idx].scrollIntoView({behavior:'smooth', block:'center'});
          }
        }, 100);
      };
    });
    document.getElementById('term-prev').onclick = function(){
      if(idx>0){ currentIdx--; showTerm(currentIdx); }
    };
    document.getElementById('term-next').onclick = function(){
      if(idx<terms.length-1){ currentIdx++; showTerm(currentIdx); }
    };
  }
  showTerm(currentIdx);
});
